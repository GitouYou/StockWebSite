)
kclsjclk
record3 = melt(record2,id=(record2$V3)
)
record2
library(sqldf)
?sqldf
colnames(record2)
head(record2)
r <- sqldf("select V3,sum(V2) from record2 group by V3")
r
record2
record3
record <- read.table("data/oyh.txt")
record <- record[2:84,]
record <- record[record[2]!=0,]
record <- read.table("IIP2.1/data/oyh.txt")
record <- record[2:84,]
record <- record[record[2]!=0,]
record
sum_time <- record[,2:3]
sum_time
sum_time <- sqldf("select V3,sum(V2) from sum_time group by V3")
sum_time
sum_time1 <- sqldf("select V3,sum(V2) from sum_time group by V3 order by sum(V2)")
sum_time
sum_time <- record[,2:3]
sum_time1 <- sqldf("select V3,sum(V2) from sum_time group by V3 order by sum(V2)")
sum_time1
sum_time1 <- sqldf("select V3,sum(V2) from sum_time group by V3 order by sum(V2) desc")
sum_time1
colnames(sum_time1) <- c("对方号码" = "phone_num" ，"通话总时长" = "sum")
colnames(sum_time1) <- c("对方号码" = "phone_num" ,"通话总时长" = "sum")
sum_time1
colnames(sum_time1) <- c("对方号码"  ,"通话总时长" )
sum_time1
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('Commission')
length(sum_time1)
length(sum_time1[1])
sum_time1[1]
length(sum_time)
length(sum_time,1)
length(sum_time[1,])
length(sum_time[,1])
runApp('IIP2.1')
runApp('widgets')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('tabsets')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
record
record <- record[2:84,]
record <- record[record[2]!=0,]
sum_time <- record[,2:3]
sum_time <- sqldf("select V3,sum(V2) from sum_time group by V3 order by sum(V2) desc")
colnames(sum_time) <- c("phone_number","total_time")
sum_time
sum_time <- sum_time[1:15,]
sum_time
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP')
runApp('hello')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
boxplot
boxplot()
?boxplot()
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
length(sum_time[,1])
runApp('IIP2.1')
runApp('IIP2.1')
sum_time
sum_time1
boxplot(sum_time1[1]~sum_time1[2])
boxplot(len ~ dose, data = ToothGrowth,
boxwex = 0.25, at = 1:3 - 0.2,
subset = supp == "VC", col = "yellow",
main = "Guinea Pigs' Tooth Growth",
xlab = "Vitamin C dose mg",
ylab = "tooth length",
xlim = c(0.5, 3.5), ylim = c(0, 35), yaxs = "i")
sum_time1[,3] <- c(rep("1",3),rep("-1",length-3))
sum_time
length <- length(sum_time[,1])
sum_time <- sum_time[1:length,]
sum_time[,3] <- c(rep("1",3),rep("-1",length-3))
sum_time[,4] <- c("F",rep("M",5),rep("U",2),rep("M",3),"F",rep("U",3))
boxplot(sum_time[3]~sum_time[2])
boxplot(list(sum_time[3])~sum_time[2])
runApp('IIP2.1')
colnames(sum_time) <- c("V1"="对方号码","V2"="通信总时间","V3"="是否亲密","V4"="性别")
boxplot(sum_time$V2,main = "通信总时长箱线图分布"，ylab = "通信时长（s）")
boxplot(sum_time$V2,main = "通信总时长箱线图分布",ylab = "通信时长（s）")
boxplot(sum_time[2],main = "通信总时长箱线图分布",ylab = "通信时长（s）")
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
runApp('IIP2.1')
qqplot
approx()
approx
shiny::runApp('IIP2.2')
A = c(19,18,18,15,18,11,16,19,17,17,20,17,19,20,20,15,15,16)
?hist
hist(A)
B = c(19,15,20,20,17,18,18,15,16,18,15,19,20,19,19,16,17,13,15)
library(ggplot2)
p <- ggplot(data = mpg,aes(x = hwy))
p <- p + geom_histogram()
library(ggplot2)
p <- ggplot(data = A)
p <- p + geom_histogram()
qplot(A, geom="histogram")
runApp('IIP2.2')
ggplot(data=A, aes(A)) + geom_histogram()
qq_Graph <- qplot(A, geom="histogram") +qplot(B, geom="histogram")
runApp('IIP2.2')
runApp('IIP2.2')
runApp('IIP2.2')
runApp('IIP2.2')
runApp('IIP2.2')
runApp('IIP2.2')
?ggplot
?qqplot
qqplot(A,B)
A
qqplot(A,B)
qqline(A,B)
a < - qqplot(A,B)
a <- qqplot(A,B)
qqline(a)
qqline(A)
qqline(B)
？qqline
?qqline
x <- A
y <- B
sx <- sort(x)
sy <- sort(y)
lenx <- length(sx)
leny <- length(sy)
if (leny < lenx)
sx <- approx(1L:lenx, sx, n = leny)$y
if (leny > lenx)
sy <- approx(1L:leny, sy, n = lenx)$y
sx
sy
length(sx)==length(sy)
iip <- data.frame(SX=sx, SY= sy)
ggplot(iip,aes(x=SX,y=SY))
library(ggplot2)
ggplot(iip,aes(x=SX,y=SY))
ggplot(iip,aes(x=SX,y=SY)) + geom_qq()
iip
ggplot(iip,aes(x=SX,y=SY)) + geom_qq()
ggplot(iip) + geom_qq()
?geom_qq
df <- data.frame(y = rt(200, df = 5))
p <- ggplot(df, aes(sample = y))
print(p)
p <- ggplot(data.frame(sx),aes(sample = sy))
p + stat_qq()
p + geom_line()
p <- ggplot(data.frame(sx),aes(sample = sy))
p + geom_line()
p + stat_qq()
shiny::runApp('IIP2.2')
p <- ggplot(data.frame(sx),aes(sample = sy))
p + stat_qq()
runApp('IIP2.2')
runApp('IIP2.2')
runApp('IIP2.2')
?qqplot
?approx
sx
sy
A = c(19,18,18,15,18,11,16,19,17,17,20,17,19,20,20,15,15,16)
B = c(19,15,20,20,17,18,18,15,16,18,15,19,20,19,19,16,17,13,15)
sx <- sort(A)
sy <- sort(B)
lenx <- length(sx)
leny <- length(sy)
if (leny < lenx)
sx <- approx(1L:lenx, sx, n = leny)$y
if (leny > lenx)
sy <- approx(1L:leny, sy, n = lenx)$y
A
B
sx
sy
length(sx)
length(A)
length(B)
length(sy)
library("quantmod")
source('~/.active-rstudio-document')
source('D:/Python/R/tu2.R', encoding = 'UTF-8')
getSymbols("EDU",src="yahoo",from="2013-08-20",to="2013-09-02")
View(`000001.SZ`)
EDU
chartTheme("white")
chartTheme("white.mono")
chartTheme()
chartSeries("EDU")
chartSeries("000001.SZ")
getSymbols("AAPL",src="yahoo")
chartSeries(000001.SZ)
chartSeries(AAPL)
chartSeries(AAPL，theme="white")
chartSeries(AAPL,theme="white")
chartSeries(AAPL,theme="white",name="AAPL CHART",subset="2011-3-15::2017-3-15")
chartSeries(AAPL,theme="white",name="AAPL CHART",subset="2016-3-15::2017-3-15")
chartSeries(SPY,subset="2014-08::2015-08",theme=chartTheme("white"),TA="addVo();addBBands();addATR();addCMF()")
chartSeries(SPY,subset="2014-08::2015-08",theme=chartTheme("white"),TA="addMACD();addRSI();addADX();addBBands()")
library(quantmod)
library(quantmod)
setSymbolLookup(GZMT=list(name='600519.ss',src='yahoo'))
getSymbols("GZMT")
chartSeries(GZMT)
jpeg(file="GZMT.jpeg")
dev.off()
source('~/.active-rstudio-document')
source('D:/R_IN_ACTION/rforpy.R')
library('quantmod')
getSymbols("600188.ss",from="2017-03-21",to="2017-04-21",src="yahoo")
jpeg(file="600188_macd_1.jpeg")
chartSeries(up.col='red',dn.col='green',TA="addVo();addMACD();")
chartSeries("GZMT",up.col='red',dn.col='green',TA="addVo();addMACD();")
library('quantmod')
setSymbolLookup(CJSY=list(name="00001.hk",src="yahoo"))
getSymbols("长江实业")
getSymbols("CJSY")
source('D:/R_IN_ACTION/rforpy.R')
a = getSymbols("600188.ss",from="2017-03-21",to="2017-04-21",src="yahoo")
chartSeries(up.col='red',dn.col='green',TA="addVo();addMACD();")
setSymbolLookup(CJSY=list(name="00001.hk",src="yahoo",from="2017-03-21",to="2017-04-21"))
getSymbols("CJSY")
source('D:/R_IN_ACTION/rforpy.R')
source('D:/R_IN_ACTION/rforpy.R')
getSymbols("A_STOCK")
setSymbolLookup(A_STOCK=list(name='600519.ss',src='yahoo',from="2017-03-21",to="2017-04-21"))
getSymbols("A_STOCK")
jpeg(file="600188_macd_1.jpeg")
chartSeries(up.col='red',dn.col='green',TA="addVo();addMACD();")
chartSeries(A_STOCK,up.col='red',dn.col='green',TA="addVo();addMACD();")
chartSeries(A_STOCK,TA="addVo();addMACD();")
chartSeries(A_STOCK,TA="addVo();addMACD()")
setSymbolLookup(A_STOCK=list(name='600188.ss',src='yahoo',from="2017-03-21",to="2017-04-21"))
getSymbols("A_STOCK")
chartSeries(A_STOCK,up.col='red',dn.col='green',TA="addVo();addMACD();")
chartSeries(A_STOCK,up.col='red',dn.col='green',TA="addMACD();")
source('D:/R_IN_ACTION/rforpy.R')
source('D:/R_IN_ACTION/rforpy.R')
source('D:/R_IN_ACTION/rforpy.R')
source('D:/R_IN_ACTION/rforpy.R')
source('D:/R_IN_ACTION/rforpy.R')
source('D:/R_IN_ACTION/rforpy.R')
source('D:/R_IN_ACTION/rforpy.R')
View(A_STOCK)
View(A_STOCK)
source('D:/R_IN_ACTION/rforpy.R')
source('D:/Python/R/tu2.R', encoding = 'UTF-8')
setSymbolLookup(A_STOCK=list(name='603019.ss',src='yahoo',from="2017-03-21",to="2017-04-21"))
source('D:/R_IN_ACTION/rforpy.R')
View(A_STOCK)
source('D:/R_IN_ACTION/rforpy.R')
View(A_STOCK)
source('D:/R_IN_ACTION/rforpy.R')
source('D:/Python/R/tu2.R', encoding = 'UTF-8')
source('D:/Python/R/tu2.R', encoding = 'UTF-8')
source('D:/Python/R/tu2.R', encoding = 'UTF-8')
getSymbols("YHOO")
source('D:/R_IN_ACTION/rforpy.R')
source('D:/R_IN_ACTION/rforpy.R')
source('D:/R_IN_ACTION/rforpy.R')
source('D:/R_IN_ACTION/rforpy.R')
q()
?jpeg()
R_CStackLimit
print  R_CStackLimit
library('quantmod')
options(warn =-1)
options("getSymbols.warning4.0"=FALSE)
setSymbolLookup({mark}=list(name='{stockCode}',src='yahoo',from="{fr}",to="{to}"))
getSymbols("{mark}")
jpeg(file="{code}_macd_{time}_{to}.jpeg",width = 650,height = 360)
chartSeries({mark},up.col='red',dn.col='green',TA="addVo();addBBands(n=10,sd=2,draw=\"bands\")")
dev.off()
?options()
options(warn =-1)
library(quantmod)
getSymbols()
options(warn =0)
getSymbols()
?addBBands()
?library()
library('xts',quietly = True)
library('xts',quietly = False)
library('TTR',quietly = False)
?getSymbols()
suppressPackageStartupMessages(library('quantmod',warn.conflicts = FALSE))
options(warn =-1)
options("getSymbols.warning4.0"=FALSE)
setSymbolLookup(TCBJ=list(name='300146.sz',src='yahoo',from="2017-1-25",to="2017-4-25"))
getSymbols("{mark}",warnings= FALSE)
getSymbols("{mark}",warnings= FALSE)
getSymbols("TCBJ",warnings= FALSE)
jpeg(file="300146_sma_3_2017-4-25.jpeg",width = 650,height = 360)
chartSeries({mark},up.col='red',dn.col='green',TA="addVo();addSMA(n=10);")
chartSeries(TCBJ,up.col='red',dn.col='green',TA="addVo();addSMA(n=10);")
dev.off()
addSMA()
?addSMA()
?q()
da <- read.table("5-3.txt",head=T)
da
View(da)
sum(is.na(da))
is.na(da)
p.app
p.app <- na.approx(da)
library(zoo)
library(timeSeries)
install.packages("timeSeries")
library(timeSeries)
?na.approx
p.app <- na.approx()
p.app <- na.approx(da)
r.stocks <- diff(log(p.app))*100
View(r.stocks)
View(r.stocks)
set.seed(12345)
w <- runif(ncol(da),0,1)
w <- w/sum(w)
rp <- r.stocks % * % w
rp <- r.stocks %*% w
rp
help('%*%')
library(stringr)
library(XML)
install.packages("XML")
install.packages("maps")
library(XML)
library(maps)
heritage_parsed <- htmlParse("https://en.wikipedia.org/wiki/List_of_World_Heritage_in_Danger",encoding = "UTF-8")
heritage_parsed
tables <- readHTMLTable(heritage_parsed,stringsAsFactors = FALSE)
tables
tables
heritage_parsed
tables[[2]]
heritage_parsed <-htmlParse("https://en.wikipedia.org/wiki/List_of_World_Heritage_in_Danger",encoding = "UTF-8")
library(stringr)
library(XML)
library(maps)
heritage_parsed <- htmlParse("https://en.wikipedia.org/wiki/List_of_World_Heritage_in_Danger",encoding = "UTF-8")
heritage_parsed
tabls <- readHTMLTable(heritage_parsed,stringsAsFactors =FALSE)
tabls
tabls[[2]]
parsed <- htmlParse("http://www.forbeschina.com/review/list/002363.shtml",encoding = "UTF-8")
parsed
table <- readHTMLTable(parsed,stringsAsFactors=FALSE)
heritage_parsed <- htmlParse("http://en.wikipedia.org/wiki/List_of_World_Heritage_in_Danger", encoding = "UTF-8")
heritage_parsed <- htmlParse("https://en.wikipedia.org/wiki/List_of_World_Heritage_in_Danger", encoding = "UTF-8")
heritage_parsed
heritage_parsed <- htmlParse("http://en.wikipedia.org/wiki/List_of_World_Heritage_in_Danger", encoding = "UTF-8")
heritage_parsed <- htmlParse("Heritage.html",encoding = "UTF-8")
tables <- readHTMLTable(heritage_parsed,stringsAsFactors=FALSE)
danger_table <-tables[[2]]
danger_table
names(danger_table)
danger_table <- danger_table[,c(1,3,4,6,7)]
colnames(danger_table)<- c("name","locn","crit","yins","yend")
danger_table$name[1:3]
library(stringr)
library(XML)
library(maps)
heritage_parsed <- htmlParse("Heritage.html",encoding = "UTF-8")
tables <- readHTMLTable(heritage_parsed,stringsAsFactors = FALSE)
danger_table <- tables[[2]]
names(danger_table)
danger_table <- danger_table[,c(1,3,4,6,7)]
colnames(danger_table) <- c("name","locn","crit","yins","yend")
danger_table$name[1:3]
View(danger_table)
?str_detect
fruit <- c("apple", "banana", "pear", "pinapple")
str_detect(fruit, "a")
str_detect(fruit, "^a"
)
str_detect(fruit, "a$"
)
str_detect(fruit, "b")
str_detect(fruit, "[aeiou]")
danger_table$crit <- ifelse(str_detect(danger_table$crit,"Natural"),"nat","cult")
danger_table$yins <-as.numeric(danger_table$yins)
?str_extarct_all()
?str_extract_all
v
shopping_list <- c("apples x4", "bag of flour", "bag of sugar", "milk x2")
str_extract(shopping_list, "\\d")
str_extract(shopping_list, "[a-z]+")
str_extract(shopping_list, "[a-z]{1,4}")
str_extract(shopping_list, "\\b[a-z]{1,4}\\b")
str_extract_all(shopping_list, "[a-z]+")
str_extract_all(shopping_list, "\\b[a-z]+\\b")
str_extract_all(shopping_list, "\\d")
str_extract_all(shopping_list, "\\b[a-z]+\\b", simplify = TRUE)
shppoing_list
shopping_list
？unlist
?unlist
l.ex <- list(a = list(1:5, LETTERS[1:5]), b = "Z", c = NA)
l.ex
unlist(l.ex, recursive = FALSE)
typeof(unlist(l.ex, recursive = FALSE))
typeof(l.ex)
typeof(l.ex[1])
unlist(l.ex, recursive = TRUE)
unlist(l.ex, recursive = FALSE)
a = str_detect(danger_table$yend,"[[:digit:]]4$")
a
a = str_extract_all(danger_table$yend,"[[:digit:]]4$")
a
str_extract_all(danger_table$yend, "[[:digit:]]{4}$
)
)
';lsal'
d""
f;ldkf
fedfld';'
_;
;
str_extract_all(danger_table$yend, "[[:digit:]]{4}$")
str_extract_all(danger_table$yend, "[[:digit:]]{4}-$")
unlist(str_extract_all(danger_table$yend, "[[:digit:]]{4}-$"))
yend_clean <- unlist(str_extract_all(danger_table$yend, "[[:digit:]]{4}-$"))
unlist(str_extract_all(danger_table$yend, "[[:digit:]]{4}$-"))
yend_clean2 <- str_extract(yend_clean, "[[:digit:]]{4}"))
yend_clean2 <- str_extract(yend_clean, "[[:digit:]]{4}")
yend_clean2
danger_table$yend <- as.numeric(yend_clean2)
danger_table$locn[C(1,3,5)]
danger_table$locn[c(1,3,5)]
danger_table$locn[c(1,3,5)]
View(danger_table)
danger_table$locn[1:3]
reg_y <- "[/][ -]*[[:digit:]]*[.]*[[:digit:]]*[;]"
reg_x <- "[;][ -]*[[:digit:]]*[.]*[[:digit:]]*"
y_coords <- str_extract(danger_table$locn, reg_y)
y_coords
danger_table$y_coords <- y_coords
y_coords <- as.numeric(str_sub(y_coords,3-2))
y_coords <- as.numeric(str_sub(y_coords,3,-2))
y_coords
y_coords <- str_extract(danger_table$locn, reg_y)
y_coords <- as.numeric(str_sub(y_coords,3,-2))
danger_table$y_coords <- y_coords
x_coords <- str_extract(danger_table$locn,reg_x)
x_coords<- as.numeric(x_coords,3,-1)
x_coords <- str_extract(danger_table$locn,reg_x)
x_coords<- as.numeric(str_sub(x_coords,3,-1))
danger_table$x_coords <- x_coords
danger_table$locn <- NULL
head(dange)
head(danger_table)
round(danger_table$x_coords,2)[1:3]
dim(danger_table)
pch <- ifelse(danger_table$crit=="nat",19,2)
map("world",col="darkgrey",lwd=0.5,mar=c(0.1,0.1,0.1,0.1))
points(danger_table$x_coords,danger_table$y_coords,pch=pch)
box()
table(danger_table$crit)
hist(danger_table$yend,freq=TRUE,xlab="year when site was put on the list of endangered sites",main="")
duration <- danger_table$yend - danger_table$yins
hist(duration,freq=TRUE,xlab="years it took to become an endangered sites",main="")
source('D:/R_IN_ACTION/indicator.R')
setSymbolLookup(TYJT=list(name="002386.sz",src="csv",from="2017-03-01",to="2017-05-31"))
getSymbols("TYJT")
getSymbols.csv()
?getSymbols("TYJT)
""
、c
‘、;
;
\c
getSymbols("TYJT")
?getSymbols
source('D:/R_IN_ACTION/indicator.R')
